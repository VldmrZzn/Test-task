# Test-task
Отлично! Давайте создадим упрощённый, но реалистичный сценарий на основе типичных ответов заказчика и напишем под него каркас программы на ST.

## **Предположим, ответы заказчика такие:**

**A. Технические характеристики:**
*   Насос центробежный, 3-фазный, управляется через пускатель (катушка 220В AC).
*   Есть датчик давления с аналоговым выходом 4-20 мА (давление 0-10 бар).
*   Частотного преобразователя нет.
*   Есть сигнал "Авария" от теплового реле насоса (нормально-замкнутый контакт, при перегрузке размыкается).

**B. Функциональность:**
*   **Критерий:** Поддержание давления в системе в диапазоне **P_min=3.5 бар - P_max=5.0 бар**.
*   **Режимы:** Ручной, Автоматический.
*   **Защиты:** Останов при аварии теплового реле, при падении давления ниже 2.0 бар (обрыв трубопровода) и при превышении выше 6.5 бар.

**C. Интерфейс:**
*   На панели HMI должны быть: Кнопки ВКЛ/ВЫКЛ, переключатель РЕЖИМ (Авто/Руч), индикаторы состояния и аварии, поле для уставок P_min/P_max.
*   Нужен счётчик моточасов.

**D. Аппаратная часть:**

Дискретные входы (DI):
di0 – Кнопка "Пуск" (панель или кнопочный пост)

di1 – Кнопка "Стоп"

di3 – Сигнал "Авария" от теплового реле (НЗ контакт)

di3 – Переключатель "Авто/Ручной"


Дискретные выходы (DO):
Do0 – Пускатель насоса (или реле управления)

Аналоговые входы (AI):
IW64 – Датчик давления 4-20 мА
---

## **Примерный код программы на ST (Siemens TIA Portal стиль)**



1.  **Дребезг контактов:** "Нужна ли программная защита от дребезга для кнопок и датчика аварии?" (Добавить таймеры `TON` на 100-200 мс).
2.  **Чередование насосов:** "Это один насос или их несколько в системе?" (Нужна очередь и логика переключения).
3.  **Задержки:** "Нужна ли задержка перед пуском после команды? Защита от частых пусков?" (Добавить `TON`/`TOF`).
4.  **Ручной сброс аварий:** "Аварии должны сбрасываться автоматически или только кнопкой 'Reset' с панели?" (Ввести переменную `ResetAlarmBtn`).
5.  **Работа с ЧП:** "Если насос с частотником, нужно ли управление скоростью?" (Добавить ПИД-регулятор и аналоговый выход/шину).
6.  **Документация:** "Нужно ли добавлять комментарии на русском для каждого блока?"

Этот код — **отличная основа для обсуждения**. Вы можете показать его заказчику и задать уточняющие вопросы: *"Вот как я понял логику. Нужно ли добавить вот эту функцию? Правильно ли срабатывает защита?"*

Такой подход сразу выявит расхождения в понимании задачи. Удачи в разработке!
